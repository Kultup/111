# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±—ñ–æ–º–µ—Ç—Ä–∏—á–Ω–æ—ó –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó

## ‚úÖ –©–æ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ

### 1. **BiometricService** (`lib/data/services/biometric_service.dart`)
–°–µ—Ä–≤—ñ—Å –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –±—ñ–æ–º–µ—Ç—Ä–∏—á–Ω–æ—é –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—î—é:
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ –±—ñ–æ–º–µ—Ç—Ä—ñ—ó –Ω–∞ –ø—Ä–∏—Å—Ç—Ä–æ—ó
- –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Ç–∏–ø—É –±—ñ–æ–º–µ—Ç—Ä—ñ—ó (Face ID, Touch ID, Fingerprint)
- –í–∏–∫–æ–Ω–∞–Ω–Ω—è –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
- –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ —Ç–∞ —Ä—ñ–∑–Ω–∏—Ö —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤

### 2. **BiometricAuthScreen** (`lib/presentation/screens/auth/biometric_auth_screen.dart`)
–ï–∫—Ä–∞–Ω –¥–ª—è –±—ñ–æ–º–µ—Ç—Ä–∏—á–Ω–æ—ó –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –∑–∞–ø—É—Å–∫ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –ø—Ä–∏ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—ñ
- –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ç–∏–ø—É –±—ñ–æ–º–µ—Ç—Ä—ñ—ó (Face ID/Touch ID/Fingerprint)
- –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ –∑ –∑—Ä–æ–∑—É–º—ñ–ª–∏–º–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º–∏
- –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –ø–µ—Ä–µ—Ö–æ–¥—É –Ω–∞ –≤—Ö—ñ–¥ –∑ –ø–∞—Ä–æ–ª–µ–º

### 3. **ProfileScreen** (`lib/presentation/screens/profile/profile_screen.dart`)
–ï–∫—Ä–∞–Ω –ø—Ä–æ—Ñ—ñ–ª—é –∑ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è–º–∏ –±—ñ–æ–º–µ—Ç—Ä—ñ—ó:
- –ü–µ—Ä–µ–º–∏–∫–∞—á —É–≤—ñ–º–∫–Ω–µ–Ω–Ω—è/–≤–∏–º–∫–Ω–µ–Ω–Ω—è –±—ñ–æ–º–µ—Ç—Ä–∏—á–Ω–æ–≥–æ –≤—Ö–æ–¥—É
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ –±—ñ–æ–º–µ—Ç—Ä—ñ—ó
- –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è —á–µ—Ä–µ–∑ –±—ñ–æ–º–µ—Ç—Ä—ñ—é –ø—Ä–∏ —É–≤—ñ–º–∫–Ω–µ–Ω–Ω—ñ
- –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

### 4. **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤ AuthProvider**
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±—ñ–æ–º–µ—Ç—Ä—ñ—ó –≤ SharedPreferences
- –ú–µ—Ç–æ–¥–∏ `setBiometricEnabled()` —Ç–∞ `biometricEnabled`

### 5. **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–ª–∞—Ç—Ñ–æ—Ä–º**
- **Android**: –î–æ–¥–∞–Ω–æ permissions –≤ `AndroidManifest.xml`
  - `USE_BIOMETRIC`
  - `USE_FINGERPRINT`
- **iOS**: –î–æ–¥–∞–Ω–æ `NSFaceIDUsageDescription` –≤ `Info.plist`

## üöÄ –Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏

### –ö—Ä–æ–∫ 1: –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
```bash
cd mobile
flutter pub get
```

### –ö—Ä–æ–∫ 2: –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –Ω–∞ –ø—Ä–∏—Å—Ç—Ä–æ—ó
```bash
# Android
flutter run -d <DEVICE_ID>

# iOS
flutter run -d <DEVICE_ID>
```

### –ö—Ä–æ–∫ 3: –£–≤—ñ–º–∫–Ω—É—Ç–∏ –±—ñ–æ–º–µ—Ç—Ä—ñ—é
1. –£–≤—ñ–π–¥—ñ—Ç—å –≤ –¥–æ–¥–∞—Ç–æ–∫
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ "–ü—Ä–æ—Ñ—ñ–ª—å" (–∫–Ω–æ–ø–∫–∞ –≤ —à–≤–∏–¥–∫–∏—Ö –¥—ñ—è—Ö –Ω–∞ –≥–æ–ª–æ–≤–Ω—ñ–π)
3. –£–≤—ñ–º–∫–Ω—ñ—Ç—å –ø–µ—Ä–µ–º–∏–∫–∞—á "–ë—ñ–æ–º–µ—Ç—Ä–∏—á–Ω–∏–π –≤—Ö—ñ–¥"
4. –ü—ñ–¥—Ç–≤–µ—Ä–¥—ñ—Ç—å —Å–≤–æ—é –æ—Å–æ–±—É —á–µ—Ä–µ–∑ –±—ñ–æ–º–µ—Ç—Ä—ñ—é

### –ö—Ä–æ–∫ 4: –í–∏—Ö—ñ–¥ —Ç–∞ –ø–æ–≤—Ç–æ—Ä–Ω–∏–π –≤—Ö—ñ–¥
1. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–í–∏–π—Ç–∏" –≤ –ø—Ä–æ—Ñ—ñ–ª—ñ
2. –ü—Ä–∏ –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É –≤—Ö–æ–¥—ñ —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–æ–∫–∞–∂–µ BiometricAuthScreen
3. –ü—ñ–¥—Ç–≤–µ—Ä–¥—ñ—Ç—å —á–µ—Ä–µ–∑ Face ID/Touch ID/Fingerprint

## üì± –ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ —Ç–∏–ø–∏ –±—ñ–æ–º–µ—Ç—Ä—ñ—ó

### iOS:
- **Face ID** (iPhone X —Ç–∞ –Ω–æ–≤—ñ—à—ñ)
- **Touch ID** (iPhone 8 —Ç–∞ —Å—Ç–∞—Ä—ñ—à—ñ –∑ Touch ID)

### Android:
- **Fingerprint** (—Å–∫–∞–Ω–µ—Ä –≤—ñ–¥–±–∏—Ç–∫—ñ–≤ –ø–∞–ª—å—Ü—ñ–≤)
- **Face Unlock** (—Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è –æ–±–ª–∏—á—á—è –Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—è—Ö)
- **Iris Scanner** (—Å–∫–∞–Ω–µ—Ä —Ä–∞–π–¥—É–∂–∫–∏ –Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—è—Ö)

## ‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –Ω–∞ –ø—Ä–∏—Å—Ç—Ä–æ—ó

### Android:
1. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è ‚Üí –ë–µ–∑–ø–µ–∫–∞ ‚Üí –ë—ñ–æ–º–µ—Ç—Ä—ñ—è
2. –î–æ–¥–∞—Ç–∏ –≤—ñ–¥–±–∏—Ç–æ–∫ –ø–∞–ª—å—Ü—è –∞–±–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è –æ–±–ª–∏—á—á—è

### iOS:
1. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è ‚Üí Face ID & Passcode (–∞–±–æ Touch ID & Passcode)
2. –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ Face ID –∞–±–æ Touch ID

## üîí –ë–µ–∑–ø–µ–∫–∞

- –ë—ñ–æ–º–µ—Ç—Ä–∏—á–Ω—ñ –¥–∞–Ω—ñ **–ù–ï –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è** –≤ –¥–æ–¥–∞—Ç–∫—É
- –ë—ñ–æ–º–µ—Ç—Ä—ñ—è –ø—Ä–∞—Ü—é—î **–ª–æ–∫–∞–ª—å–Ω–æ** –Ω–∞ –ø—Ä–∏—Å—Ç—Ä–æ—ó
- –ü—Ä–∏ —É—Å–ø—ñ—à–Ω—ñ–π –±—ñ–æ–º–µ—Ç—Ä—ñ—ó —Ä–æ–∑–±–ª–æ–∫–æ–≤—É—î—Ç—å—Å—è –¥–æ—Å—Ç—É–ø –¥–æ **JWT —Ç–æ–∫–µ–Ω—É**
- –¢–æ–∫–µ–Ω –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ **flutter_secure_storage** (Keychain –Ω–∞ iOS, KeyStore –Ω–∞ Android)

## üêõ –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

–°–∏—Å—Ç–µ–º–∞ –æ–±—Ä–æ–±–ª—è—î –Ω–∞—Å—Ç—É–ø–Ω—ñ –ø–æ–º–∏–ª–∫–∏:

| –ü–æ–º–∏–ª–∫–∞ | –û–ø–∏—Å | –î—ñ—è |
|---------|------|-----|
| `notAvailable` | –ë—ñ–æ–º–µ—Ç—Ä—ñ—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ | –ü–æ–∫–∞–∑–∞—Ç–∏ –∫–Ω–æ–ø–∫—É –≤—Ö–æ–¥—É –∑ –ø–∞—Ä–æ–ª–µ–º |
| `notEnrolled` | –ë—ñ–æ–º–µ—Ç—Ä—ñ—è –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∞ | –ó–∞–ø—Ä–æ–ø–æ–Ω—É–≤–∞—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ |
| `lockedOut` | –ó–∞–±–∞–≥–∞—Ç–æ –Ω–µ–≤–¥–∞–ª–∏—Ö —Å–ø—Ä–æ–± | –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ –ø—ñ–∑–Ω—ñ—à–µ |
| `permanentlyLockedOut` | –ë—ñ–æ–º–µ—Ç—Ä—ñ—è –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–∞ | –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ PIN/–ø–∞—Ä–æ–ª—å |
| `userCanceled` | –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á —Å–∫–∞—Å—É–≤–∞–≤ | –ü–æ–∫–∞–∑–∞—Ç–∏ –∫–Ω–æ–ø–∫—É —Å–ø—Ä–æ–±—É–≤–∞—Ç–∏ –∑–Ω–æ–≤—É |

## üéØ –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è BiometricService

```dart
import 'package:mobile/data/services/biometric_service.dart';

final biometricService = BiometricService();

// –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å
final isAvailable = await biometricService.isBiometricAvailable();

if (isAvailable) {
  // –í–∏–∫–æ–Ω–∞—Ç–∏ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é
  final result = await biometricService.authenticate(
    localizedReason: '–ü—ñ–¥—Ç–≤–µ—Ä–¥—ñ—Ç—å —Å–≤–æ—é –æ—Å–æ–±—É',
    biometricOnly: false,
  );
  
  if (result.success) {
    // –£—Å–ø—ñ—à–Ω–∞ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è
    print('Authenticated!');
  } else {
    // –ü–æ–º–∏–ª–∫–∞
    print('Error: ${result.errorMessage}');
  }
}
```

## üìã TODO (–º–∞–π–±—É—Ç–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è)

- [ ] –î–æ–¥–∞—Ç–∏ —Ç–∞–π–º–µ—Ä –±–ª–æ–∫—É–≤–∞–Ω–Ω—è –ø—ñ—Å–ª—è –Ω–µ–≤–¥–∞–ª–∏—Ö —Å–ø—Ä–æ–±
- [ ] –î–æ–¥–∞—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —á–∞—Å—É –∞–≤—Ç–æ–±–ª–æ–∫—É–≤–∞–Ω–Ω—è
- [ ] –î–æ–¥–∞—Ç–∏ –ø—ñ–¥—Ç—Ä–∏–º–∫—É PIN-–∫–æ–¥—É —è–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞
- [ ] –î–æ–¥–∞—Ç–∏ –±—ñ–æ–º–µ—Ç—Ä—ñ—é –¥–ª—è –æ–∫—Ä–µ–º–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π (–ø–æ–∫—É–ø–∫–∏, –∑–º—ñ–Ω–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å)
- [ ] –î–æ–¥–∞—Ç–∏ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤—ñ–¥–∫—Ä–∏–≤–∞—Ç–∏ —Å–∏—Å—Ç–µ–º–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±—ñ–æ–º–µ—Ç—Ä—ñ—ó

## üîß –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –ù–∞ –µ–º—É–ª—è—Ç–æ—Ä—ñ Android:
1. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è ‚Üí Security ‚Üí Fingerprint
2. –î–æ–¥–∞—Ç–∏ –µ–º—É–ª—å–æ–≤–∞–Ω–∏–π –≤—ñ–¥–±–∏—Ç–æ–∫

### –ù–∞ —Å–∏–º—É–ª—è—Ç–æ—Ä—ñ iOS:
1. Features ‚Üí Face ID ‚Üí Enrolled
2. Features ‚Üí Face ID ‚Üí Matching Face (–¥–ª—è —É—Å–ø—ñ—à–Ω–æ—ó –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó)

## üìö –ö–æ—Ä–∏—Å–Ω—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è

- [local_auth package](https://pub.dev/packages/local_auth)
- [Android BiometricPrompt API](https://developer.android.com/training/sign-in/biometric-auth)
- [iOS LocalAuthentication](https://developer.apple.com/documentation/localauthentication)

