# –î–µ—Ç–∞–ª—å–Ω–∏–π –ø–æ–∫—Ä–æ–∫–æ–≤–∏–π –ø–ª–∞–Ω –¥–ª—è –≤—Å—ñ—Ö —Å—Ç–æ—Ä—ñ–Ω–æ–∫ –∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—ñ

## üìã –ó–º—ñ—Å—Ç

1. [DashboardPage - –ì–æ–ª–æ–≤–Ω–∞ –ø–∞–Ω–µ–ª—å](#1-dashboardpage---–≥–æ–ª–æ–≤–Ω–∞-–ø–∞–Ω–µ–ª—å)
2. [LoginPage - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è](#2-loginpage---–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è)
3. [UsersPage - –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ](#3-userspage---–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ)
4. [UserDetailPage - –î–µ—Ç–∞–ª—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞](#4-userdetailpage---–¥–µ—Ç–∞–ª—ñ-–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞)
5. [UserEditPage - –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞](#5-usereditpage---—Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è-–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞)
6. [QuestionsPage - –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–∏—Ç–∞–Ω–Ω—è–º–∏](#6-questionspage---—É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è-–ø–∏—Ç–∞–Ω–Ω—è–º–∏)
7. [CategoriesPage - –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó](#7-categoriespage---–∫–∞—Ç–µ–≥–æ—Ä—ñ—ó)
8. [CitiesPage - –ú—ñ—Å—Ç–∞](#8-citiespage---–º—ñ—Å—Ç–∞)
9. [PositionsPage - –ü–æ—Å–∞–¥–∏](#9-positionspage---–ø–æ—Å–∞–¥–∏)
10. [StatsPage - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞](#10-statspage---—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
11. [DailyTestsPage - –©–æ–¥–µ–Ω–Ω—ñ —Ç–µ—Å—Ç–∏](#11-dailytestspage---—â–æ–¥–µ–Ω–Ω—ñ-—Ç–µ—Å—Ç–∏)
12. [AchievementsPage - –ê—á—ñ–≤–∫–∏](#12-achievementspage---–∞—á—ñ–≤–∫–∏)
13. [ShopPage - –ú–∞–≥–∞–∑–∏–Ω](#13-shoppage---–º–∞–≥–∞–∑–∏–Ω)
14. [KnowledgeBasePage - –ë–∞–∑–∞ –∑–Ω–∞–Ω—å](#14-knowledgebasepage---–±–∞–∑–∞-–∑–Ω–∞–Ω—å)
15. [FeedbackPage - –ó–≤–æ—Ä–æ—Ç–Ω–∏–π –∑–≤'—è–∑–æ–∫](#15-feedbackpage---–∑–≤–æ—Ä–æ—Ç–Ω–∏–π-–∑–≤—è–∑–æ–∫)
16. [SettingsPage - –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è](#16-settingspage---–Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è)
17. [PendingApprovalsPage - –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è](#17-pendingapprovalspage---–ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è)
18. [ManualCoinsPage - –†—É—á–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –∑ –º–æ–Ω–µ—Ç–∞–º–∏](#18-manualcoinspage---—Ä—É—á–Ω—ñ-–æ–ø–µ—Ä–∞—Ü—ñ—ó-–∑-–º–æ–Ω–µ—Ç–∞–º–∏)
19. [AuditLogsPage - –ê—É–¥–∏—Ç –ª–æ–≥–∏](#19-auditlogspage---–∞—É–¥–∏—Ç-–ª–æ–≥–∏)
20. [NotificationsPage - –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è](#20-notificationspage---—Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è)
21. [TournamentsPage - –¢—É—Ä–Ω—ñ—Ä–∏](#21-tournamentspage---—Ç—É—Ä–Ω—ñ—Ä–∏)

---

## 1. DashboardPage - –ì–æ–ª–æ–≤–Ω–∞ –ø–∞–Ω–µ–ª—å

### –ó–∞–≥–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è
**–ú–µ—Ç–∞**: –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑–∞–≥–∞–ª—å–Ω–æ—ó —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–∏—Å—Ç–µ–º–∏ —Ç–∞ —à–≤–∏–¥–∫–∏–π –¥–æ—Å—Ç—É–ø –¥–æ –æ—Å–Ω–æ–≤–Ω–∏—Ö —Ä–æ–∑–¥—ñ–ª—ñ–≤.

### –ö—Ä–æ–∫ 1: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
```jsx
// admin/src/pages/DashboardPage.jsx
import { useState, useEffect } from 'react';
import { Box, Grid, Card, CardContent, Typography, Button } from '@mui/material';
import { useNavigate } from 'react-router-dom';
import api from '../services/api';
```

### –ö—Ä–æ–∫ 2: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å—Ç–∞–Ω—É
```jsx
const [stats, setStats] = useState({
  totalUsers: 0,
  activeUsers: 0,
  totalQuestions: 0,
  activeQuestions: 0,
  totalCategories: 0,
  activeCategories: 0,
  totalAchievements: 0,
  totalTests: 0,
  totalCoins: 0,
});
const [loading, setLoading] = useState(true);
```

### –ö—Ä–æ–∫ 3: –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
```jsx
useEffect(() => {
  loadDashboardStats();
}, []);

const loadDashboardStats = async () => {
  try {
    setLoading(true);
    
    // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
    const usersRes = await api.get('/users?limit=1');
    const totalUsers = usersRes.data.total || 0;
    const activeUsers = usersRes.data.users?.filter(u => u.status === 'active').length || 0;
    
    // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–∏—Ç–∞–Ω—å
    const questionsRes = await api.get('/questions?limit=1');
    const totalQuestions = questionsRes.data.total || 0;
    const activeQuestions = questionsRes.data.questions?.filter(q => q.isActive !== false).length || 0;
    
    // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä—ñ–π
    const categoriesRes = await api.get('/categories');
    const totalCategories = categoriesRes.data.data?.length || 0;
    const activeCategories = categoriesRes.data.data?.filter(c => c.isActive !== false).length || 0;
    
    // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∞—á—ñ–≤–æ–∫
    const achievementsRes = await api.get('/achievements');
    const totalAchievements = achievementsRes.data.data?.length || 0;
    
    // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ç–µ—Å—Ç—ñ–≤
    const testsRes = await api.get('/daily-tests?limit=1');
    const totalTests = testsRes.data.total || 0;
    
    // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–∞–≥–∞–ª—å–Ω–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –º–æ–Ω–µ—Ç
    const coinsRes = await api.get('/stats/coins');
    const totalCoins = coinsRes.data.data?.totalCoins || 0;
    
    setStats({
      totalUsers,
      activeUsers,
      totalQuestions,
      activeQuestions,
      totalCategories,
      activeCategories,
      totalAchievements,
      totalTests,
      totalCoins,
    });
  } catch (error) {
    console.error('Error loading dashboard stats:', error);
  } finally {
    setLoading(false);
  }
};
```

### –ö—Ä–æ–∫ 4: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–∞—Ä—Ç–æ–∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
```jsx
const StatCard = ({ title, value, subtitle, icon, color, onClick }) => (
  <Card 
    sx={{ 
      height: '100%', 
      cursor: onClick ? 'pointer' : 'default',
      transition: 'transform 0.2s',
      '&:hover': onClick ? { transform: 'scale(1.02)' } : {},
    }}
    onClick={onClick}
  >
    <CardContent>
      <Box display="flex" justifyContent="space-between" alignItems="center">
        <Box>
          <Typography color="textSecondary" gutterBottom>
            {title}
          </Typography>
          <Typography variant="h4" component="div" color={color || 'primary'}>
            {value}
          </Typography>
          {subtitle && (
            <Typography variant="body2" color="textSecondary">
              {subtitle}
            </Typography>
          )}
        </Box>
        {icon && (
          <Box sx={{ fontSize: 48, color: color || 'primary.main' }}>
            {icon}
          </Box>
        )}
      </Box>
    </CardContent>
  </Card>
);
```

### –ö—Ä–æ–∫ 5: –û—Å–Ω–æ–≤–Ω–∞ —Ä–æ–∑–º—ñ—Ç–∫–∞
```jsx
return (
  <Box>
    <Typography variant="h4" gutterBottom>
      –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è
    </Typography>
    
    {loading ? (
      <Box display="flex" justifyContent="center" p={4}>
        <CircularProgress />
      </Box>
    ) : (
      <Grid container spacing={3} sx={{ mt: 2 }}>
        {/* –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ */}
        <Grid item xs={12} sm={6} md={3}>
          <StatCard
            title="–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ"
            value={stats.totalUsers}
            subtitle={`${stats.activeUsers} –∞–∫—Ç–∏–≤–Ω–∏—Ö`}
            icon={<PeopleIcon />}
            color="primary"
            onClick={() => navigate('/users')}
          />
        </Grid>
        
        {/* –ü–∏—Ç–∞–Ω–Ω—è */}
        <Grid item xs={12} sm={6} md={3}>
          <StatCard
            title="–ü–∏—Ç–∞–Ω–Ω—è"
            value={stats.totalQuestions}
            subtitle={`${stats.activeQuestions} –∞–∫—Ç–∏–≤–Ω–∏—Ö`}
            icon={<QuizIcon />}
            color="secondary"
            onClick={() => navigate('/questions')}
          />
        </Grid>
        
        {/* –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó */}
        <Grid item xs={12} sm={6} md={3}>
          <StatCard
            title="–ö–∞—Ç–µ–≥–æ—Ä—ñ—ó"
            value={stats.totalCategories}
            subtitle={`${stats.activeCategories} –∞–∫—Ç–∏–≤–Ω–∏—Ö`}
            icon={<CategoryIcon />}
            color="info"
            onClick={() => navigate('/categories')}
          />
        </Grid>
        
        {/* –ê—á—ñ–≤–∫–∏ */}
        <Grid item xs={12} sm={6} md={3}>
          <StatCard
            title="–ê—á—ñ–≤–∫–∏"
            value={stats.totalAchievements}
            icon={<EmojiEventsIcon />}
            color="warning"
            onClick={() => navigate('/achievements')}
          />
        </Grid>
        
        {/* –¢–µ—Å—Ç–∏ */}
        <Grid item xs={12} sm={6} md={3}>
          <StatCard
            title="–¢–µ—Å—Ç–∏"
            value={stats.totalTests}
            icon={<AssignmentIcon />}
            color="success"
            onClick={() => navigate('/daily-tests')}
          />
        </Grid>
        
        {/* –ú–æ–Ω–µ—Ç–∏ */}
        <Grid item xs={12} sm={6} md={3}>
          <StatCard
            title="–ú–æ–Ω–µ—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—ñ"
            value={stats.totalCoins.toLocaleString()}
            icon={<MonetizationOnIcon />}
            color="warning"
          />
        </Grid>
      </Grid>
    )}
    
    {/* –®–≤–∏–¥–∫—ñ –¥—ñ—ó */}
    <Box sx={{ mt: 4 }}>
      <Typography variant="h5" gutterBottom>
        –®–≤–∏–¥–∫—ñ –¥—ñ—ó
      </Typography>
      <Grid container spacing={2} sx={{ mt: 1 }}>
        <Grid item>
          <Button variant="contained" onClick={() => navigate('/questions/new')}>
            –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–∏—Ç–∞–Ω–Ω—è
          </Button>
        </Grid>
        <Grid item>
          <Button variant="contained" onClick={() => navigate('/achievements/new')}>
            –°—Ç–≤–æ—Ä–∏—Ç–∏ –∞—á—ñ–≤–∫—É
          </Button>
        </Grid>
        <Grid item>
          <Button variant="contained" onClick={() => navigate('/shop/new')}>
            –î–æ–¥–∞—Ç–∏ —Ç–æ–≤–∞—Ä
          </Button>
        </Grid>
        <Grid item>
          <Button variant="outlined" onClick={() => navigate('/pending-approvals')}>
            –û–ø–µ—Ä–∞—Ü—ñ—ó –Ω–∞ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è
          </Button>
        </Grid>
      </Grid>
    </Box>
  </Box>
);
```

### –ö—Ä–æ–∫ 6: –Ü–º–ø–æ—Ä—Ç–∏ –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏—Ö —ñ–∫–æ–Ω–æ–∫
```jsx
import PeopleIcon from '@mui/icons-material/People';
import QuizIcon from '@mui/icons-material/Quiz';
import CategoryIcon from '@mui/icons-material/Category';
import EmojiEventsIcon from '@mui/icons-material/EmojiEvents';
import AssignmentIcon from '@mui/icons-material/Assignment';
import MonetizationOnIcon from '@mui/icons-material/MonetizationOn';
import CircularProgress from '@mui/material/CircularProgress';
```

---

## 2. LoginPage - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è

### –ó–∞–≥–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è
**–ú–µ—Ç–∞**: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –≤ —Å–∏—Å—Ç–µ–º—ñ.

### –ö—Ä–æ–∫ 1: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ñ–æ—Ä–º–∏
```jsx
// admin/src/pages/LoginPage.jsx
import { useState } from 'react';
import { Box, TextField, Button, Typography, Paper, Alert } from '@mui/material';
import { useAuth } from '../context/AuthContext';
import { useNavigate } from 'react-router-dom';

const LoginPage = () => {
  const [login, setLogin] = useState('');
  const [password, setPassword] = useState('');
  const [error, setError] = useState('');
  const [loading, setLoading] = useState(false);
  const { login: authLogin } = useAuth();
  const navigate = useNavigate();
```

### –ö—Ä–æ–∫ 2: –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Ñ–æ—Ä–º–∏
```jsx
const validateForm = () => {
  if (!login.trim()) {
    setError('–í–≤–µ–¥—ñ—Ç—å –ª–æ–≥—ñ–Ω');
    return false;
  }
  if (login.length < 3 || login.length > 30) {
    setError('–õ–æ–≥—ñ–Ω –º–∞—î –±—É—Ç–∏ –≤—ñ–¥ 3 –¥–æ 30 —Å–∏–º–≤–æ–ª—ñ–≤');
    return false;
  }
  if (!/^[a-zA-Z0-9_]+$/.test(login)) {
    setError('–õ–æ–≥—ñ–Ω –º–æ–∂–µ –º—ñ—Å—Ç–∏—Ç–∏ —Ç—ñ–ª—å–∫–∏ –ª–∞—Ç–∏–Ω—Å—å–∫—ñ –ª—ñ—Ç–µ—Ä–∏, —Ü–∏—Ñ—Ä–∏ —Ç–∞ –ø—ñ–¥–∫—Ä–µ—Å–ª–µ–Ω–Ω—è');
    return false;
  }
  if (!password) {
    setError('–í–≤–µ–¥—ñ—Ç—å –ø–∞—Ä–æ–ª—å');
    return false;
  }
  if (password.length < 6) {
    setError('–ü–∞—Ä–æ–ª—å –º–∞—î –±—É—Ç–∏ –Ω–µ –º–µ–Ω—à–µ 6 —Å–∏–º–≤–æ–ª—ñ–≤');
    return false;
  }
  return true;
};
```

### –ö—Ä–æ–∫ 3: –û–±—Ä–æ–±–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º–∏
```jsx
const handleSubmit = async (e) => {
  e.preventDefault();
  setError('');
  
  if (!validateForm()) {
    return;
  }
  
  try {
    setLoading(true);
    await authLogin(login, password);
    navigate('/dashboard');
  } catch (err) {
    setError(err.response?.data?.message || '–ü–æ–º–∏–ª–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó');
  } finally {
    setLoading(false);
  }
};
```

### –ö—Ä–æ–∫ 4: –†–æ–∑–º—ñ—Ç–∫–∞ —Ñ–æ—Ä–º–∏
```jsx
return (
  <Box
    sx={{
      display: 'flex',
      justifyContent: 'center',
      alignItems: 'center',
      minHeight: '100vh',
      backgroundColor: 'grey.100',
    }}
  >
    <Paper sx={{ p: 4, maxWidth: 400, width: '100%' }}>
      <Typography variant="h4" component="h1" gutterBottom align="center">
        –ê–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å
      </Typography>
      <Typography variant="body2" color="textSecondary" align="center" gutterBottom>
        –í–≤–µ–¥—ñ—Ç—å –¥–∞–Ω—ñ –¥–ª—è –≤—Ö–æ–¥—É
      </Typography>
      
      {error && (
        <Alert severity="error" sx={{ mt: 2, mb: 2 }}>
          {error}
        </Alert>
      )}
      
      <Box component="form" onSubmit={handleSubmit} sx={{ mt: 3 }}>
        <TextField
          fullWidth
          label="–õ–æ–≥—ñ–Ω"
          value={login}
          onChange={(e) => setLogin(e.target.value)}
          margin="normal"
          autoFocus
          disabled={loading}
          error={!!error}
        />
        <TextField
          fullWidth
          label="–ü–∞—Ä–æ–ª—å"
          type="password"
          value={password}
          onChange={(e) => setPassword(e.target.value)}
          margin="normal"
          disabled={loading}
          error={!!error}
        />
        <Button
          type="submit"
          fullWidth
          variant="contained"
          sx={{ mt: 3, mb: 2 }}
          disabled={loading}
        >
          {loading ? '–í—Ö—ñ–¥...' : '–£–≤—ñ–π—Ç–∏'}
        </Button>
      </Box>
    </Paper>
  </Box>
);
```

---

## 3. UsersPage - –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ

### –ó–∞–≥–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è
**–ú–µ—Ç–∞**: –°–ø–∏—Å–æ–∫ –≤—Å—ñ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—î—é, –ø–æ—à—É–∫–æ–º —Ç–∞ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—î—é.

### –ö—Ä–æ–∫ 1: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞ —Å—Ç–∞–Ω
```jsx
// admin/src/pages/UsersPage.jsx
import { useState, useEffect } from 'react';
import {
  Box,
  Typography,
  Table,
  TableBody,
  TableCell,
  TableContainer,
  TableHead,
  TableRow,
  Paper,
  TextField,
  Button,
  Chip,
  IconButton,
  Menu,
  MenuItem,
  Pagination,
  Autocomplete,
  Checkbox,
  Toolbar,
} from '@mui/material';
import { useNavigate } from 'react-router-dom';
import api from '../services/api';

const UsersPage = () => {
  const [users, setUsers] = useState([]);
  const [loading, setLoading] = useState(false);
  const [page, setPage] = useState(1);
  const [totalPages, setTotalPages] = useState(1);
  const [search, setSearch] = useState('');
  const [selectedCity, setSelectedCity] = useState(null);
  const [selectedPosition, setSelectedPosition] = useState(null);
  const [selectedRole, setSelectedRole] = useState(null);
  const [cities, setCities] = useState([]);
  const [positions, setPositions] = useState([]);
  const [selectedUsers, setSelectedUsers] = useState([]);
  const [actionMenuAnchor, setActionMenuAnchor] = useState(null);
  const [actionMenuUser, setActionMenuUser] = useState(null);
  const navigate = useNavigate();
```

### –ö—Ä–æ–∫ 2: –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º—ñ—Å—Ç —Ç–∞ –ø–æ—Å–∞–¥
```jsx
useEffect(() => {
  loadCities();
  loadPositions();
}, []);

const loadCities = async () => {
  try {
    const res = await api.get('/cities');
    setCities(res.data.data || []);
  } catch (error) {
    console.error('Error loading cities:', error);
  }
};

const loadPositions = async () => {
  try {
    const res = await api.get('/positions');
    setPositions(res.data.data || []);
  } catch (error) {
    console.error('Error loading positions:', error);
  }
};
```

### –ö—Ä–æ–∫ 3: –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
```jsx
useEffect(() => {
  loadUsers();
}, [page, search, selectedCity, selectedPosition, selectedRole]);

const loadUsers = async () => {
  try {
    setLoading(true);
    const params = {
      page,
      limit: 20,
    };
    
    if (search) params.search = search;
    if (selectedCity) params.city = selectedCity._id;
    if (selectedPosition) params.position = selectedPosition._id;
    if (selectedRole) params.role = selectedRole;
    
    const res = await api.get('/users', { params });
    setUsers(res.data.users || []);
    setTotalPages(Math.ceil((res.data.total || 0) / 20));
  } catch (error) {
    console.error('Error loading users:', error);
  } finally {
    setLoading(false);
  }
};
```

### –ö—Ä–æ–∫ 4: –û–±—Ä–æ–±–∫–∞ –≤–∏–±–æ—Ä—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
```jsx
const handleSelectAll = (event) => {
  if (event.target.checked) {
    setSelectedUsers(users.map(u => u._id));
  } else {
    setSelectedUsers([]);
  }
};

const handleSelectUser = (userId) => {
  setSelectedUsers(prev => 
    prev.includes(userId)
      ? prev.filter(id => id !== userId)
      : [...prev, userId]
  );
};
```

### –ö—Ä–æ–∫ 5: –ú–∞—Å–æ–≤—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó
```jsx
const handleBulkDelete = async () => {
  if (!selectedUsers.length) return;
  
  if (!window.confirm(`–í–∏–¥–∞–ª–∏—Ç–∏ ${selectedUsers.length} –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤?`)) {
    return;
  }
  
  try {
    await api.post('/users/bulk-delete', { userIds: selectedUsers });
    setSelectedUsers([]);
    loadUsers();
  } catch (error) {
    console.error('Error deleting users:', error);
  }
};

const handleBulkBlock = async () => {
  if (!selectedUsers.length) return;
  
  try {
    await api.post('/users/bulk-block', { userIds: selectedUsers });
    setSelectedUsers([]);
    loadUsers();
  } catch (error) {
    console.error('Error blocking users:', error);
  }
};

const handleBulkUnblock = async () => {
  if (!selectedUsers.length) return;
  
  try {
    await api.post('/users/bulk-unblock', { userIds: selectedUsers });
    setSelectedUsers([]);
    loadUsers();
  } catch (error) {
    console.error('Error unblocking users:', error);
  }
};
```

### –ö—Ä–æ–∫ 6: –Ü–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó
```jsx
const handleDeleteUser = async (userId) => {
  if (!window.confirm('–í–∏–¥–∞–ª–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞?')) return;
  
  try {
    await api.delete(`/users/${userId}`);
    loadUsers();
  } catch (error) {
    console.error('Error deleting user:', error);
  }
};

const handleBlockUser = async (userId) => {
  try {
    await api.put(`/users/${userId}/block`);
    loadUsers();
    setActionMenuAnchor(null);
  } catch (error) {
    console.error('Error blocking user:', error);
  }
};

const handleUnblockUser = async (userId) => {
  try {
    await api.put(`/users/${userId}/unblock`);
    loadUsers();
    setActionMenuAnchor(null);
  } catch (error) {
    console.error('Error unblocking user:', error);
  }
};
```

### –ö—Ä–æ–∫ 7: –ï–∫—Å–ø–æ—Ä—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
```jsx
const handleExport = async () => {
  try {
    const params = {};
    if (search) params.search = search;
    if (selectedCity) params.city = selectedCity._id;
    if (selectedPosition) params.position = selectedPosition._id;
    if (selectedRole) params.role = selectedRole;
    
    const res = await api.get('/users/export', { 
      params,
      responseType: 'blob',
    });
    
    const url = window.URL.createObjectURL(new Blob([res.data]));
    const link = document.createElement('a');
    link.href = url;
    link.setAttribute('download', `users_${new Date().toISOString()}.xlsx`);
    document.body.appendChild(link);
    link.click();
    link.remove();
  } catch (error) {
    console.error('Error exporting users:', error);
  }
};
```

### –ö—Ä–æ–∫ 8: –†–æ–∑–º—ñ—Ç–∫–∞ —Ç–∞–±–ª–∏—Ü—ñ
```jsx
return (
  <Box>
    <Box display="flex" justifyContent="space-between" alignItems="center" mb={3}>
      <Typography variant="h4">–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ</Typography>
      <Button variant="outlined" onClick={handleExport}>
        –ï–∫—Å–ø–æ—Ä—Ç –≤ Excel
      </Button>
    </Box>
    
    {/* –§—ñ–ª—å—Ç—Ä–∏ */}
    <Paper sx={{ p: 2, mb: 2 }}>
      <Box display="flex" gap={2} flexWrap="wrap">
        <TextField
          label="–ü–æ—à—É–∫"
          value={search}
          onChange={(e) => setSearch(e.target.value)}
          size="small"
          sx={{ flexGrow: 1, minWidth: 200 }}
        />
        <Autocomplete
          options={cities}
          getOptionLabel={(option) => option.name}
          value={selectedCity}
          onChange={(e, value) => setSelectedCity(value)}
          renderInput={(params) => <TextField {...params} label="–ú—ñ—Å—Ç–æ" size="small" />}
          sx={{ width: 200 }}
        />
        <Autocomplete
          options={positions}
          getOptionLabel={(option) => option.name}
          value={selectedPosition}
          onChange={(e, value) => setSelectedPosition(value)}
          renderInput={(params) => <TextField {...params} label="–ü–æ—Å–∞–¥–∞" size="small" />}
          sx={{ width: 200 }}
        />
        <Autocomplete
          options={['user', 'admin']}
          value={selectedRole}
          onChange={(e, value) => setSelectedRole(value)}
          renderInput={(params) => <TextField {...params} label="–†–æ–ª—å" size="small" />}
          sx={{ width: 150 }}
        />
        <Button
          variant="outlined"
          onClick={() => {
            setSearch('');
            setSelectedCity(null);
            setSelectedPosition(null);
            setSelectedRole(null);
          }}
        >
          –û—á–∏—Å—Ç–∏—Ç–∏
        </Button>
      </Box>
    </Paper>
    
    {/* –ü–∞–Ω–µ–ª—å –º–∞—Å–æ–≤–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π */}
    {selectedUsers.length > 0 && (
      <Toolbar sx={{ bgcolor: 'primary.light', color: 'white' }}>
        <Typography sx={{ flex: 1 }}>
          –í–∏–±—Ä–∞–Ω–æ: {selectedUsers.length}
        </Typography>
        <Button color="inherit" onClick={handleBulkUnblock}>
          –†–æ–∑–±–ª–æ–∫—É–≤–∞—Ç–∏
        </Button>
        <Button color="inherit" onClick={handleBulkBlock}>
          –ó–∞–±–ª–æ–∫—É–≤–∞—Ç–∏
        </Button>
        <Button color="error" onClick={handleBulkDelete}>
          –í–∏–¥–∞–ª–∏—Ç–∏
        </Button>
        <IconButton color="inherit" onClick={() => setSelectedUsers([])}>
          <CloseIcon />
        </IconButton>
      </Toolbar>
    )}
    
    {/* –¢–∞–±–ª–∏—Ü—è */}
    <TableContainer component={Paper}>
      <Table>
        <TableHead>
          <TableRow>
            <TableCell padding="checkbox">
              <Checkbox
                checked={users.length > 0 && selectedUsers.length === users.length}
                indeterminate={selectedUsers.length > 0 && selectedUsers.length < users.length}
                onChange={handleSelectAll}
              />
            </TableCell>
            <TableCell>–Ü–º'—è</TableCell>
            <TableCell>–õ–æ–≥—ñ–Ω</TableCell>
            <TableCell>–ú—ñ—Å—Ç–æ</TableCell>
            <TableCell>–ü–æ—Å–∞–¥–∞</TableCell>
            <TableCell>–†–æ–ª—å</TableCell>
            <TableCell>–°—Ç–∞—Ç—É—Å</TableCell>
            <TableCell>–ú–æ–Ω–µ—Ç–∏</TableCell>
            <TableCell>–î—ñ—ó</TableCell>
          </TableRow>
        </TableHead>
        <TableBody>
          {loading ? (
            <TableRow>
              <TableCell colSpan={9} align="center">
                <CircularProgress />
              </TableCell>
            </TableRow>
          ) : users.length === 0 ? (
            <TableRow>
              <TableCell colSpan={9} align="center">
                –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ
              </TableCell>
            </TableRow>
          ) : (
            users.map((user) => (
              <TableRow key={user._id} hover>
                <TableCell padding="checkbox">
                  <Checkbox
                    checked={selectedUsers.includes(user._id)}
                    onChange={() => handleSelectUser(user._id)}
                  />
                </TableCell>
                <TableCell>
                  {user.firstName} {user.lastName}
                </TableCell>
                <TableCell>{user.login}</TableCell>
                <TableCell>{user.city?.name || '-'}</TableCell>
                <TableCell>{user.position?.name || '-'}</TableCell>
                <TableCell>
                  <Chip
                    label={user.role || 'user'}
                    size="small"
                    color={user.role === 'admin' ? 'primary' : 'default'}
                  />
                </TableCell>
                <TableCell>
                  <Chip
                    label={user.status || 'active'}
                    size="small"
                    color={user.status === 'active' ? 'success' : 'error'}
                  />
                </TableCell>
                <TableCell>{user.coins || 0} ü™ô</TableCell>
                <TableCell>
                  <IconButton
                    size="small"
                    onClick={() => navigate(`/users/${user._id}`)}
                  >
                    <VisibilityIcon />
                  </IconButton>
                  <IconButton
                    size="small"
                    onClick={(e) => {
                      setActionMenuAnchor(e.currentTarget);
                      setActionMenuUser(user);
                    }}
                  >
                    <MoreVertIcon />
                  </IconButton>
                </TableCell>
              </TableRow>
            ))
          )}
        </TableBody>
      </Table>
    </TableContainer>
    
    {/* –ú–µ–Ω—é –¥—ñ–π */}
    <Menu
      anchorEl={actionMenuAnchor}
      open={!!actionMenuAnchor}
      onClose={() => setActionMenuAnchor(null)}
    >
      <MenuItem onClick={() => {
        navigate(`/users/${actionMenuUser?._id}/edit`);
        setActionMenuAnchor(null);
      }}>
        –†–µ–¥–∞–≥—É–≤–∞—Ç–∏
      </MenuItem>
      {actionMenuUser?.status === 'active' ? (
        <MenuItem onClick={() => handleBlockUser(actionMenuUser._id)}>
          –ó–∞–±–ª–æ–∫—É–≤–∞—Ç–∏
        </MenuItem>
      ) : (
        <MenuItem onClick={() => handleUnblockUser(actionMenuUser._id)}>
          –†–æ–∑–±–ª–æ–∫—É–≤–∞—Ç–∏
        </MenuItem>
      )}
      <MenuItem
        onClick={() => {
          handleDeleteUser(actionMenuUser?._id);
          setActionMenuAnchor(null);
        }}
        sx={{ color: 'error.main' }}
      >
        –í–∏–¥–∞–ª–∏—Ç–∏
      </MenuItem>
    </Menu>
    
    {/* –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è */}
    <Box display="flex" justifyContent="center" mt={3}>
      <Pagination
        count={totalPages}
        page={page}
        onChange={(e, value) => setPage(value)}
        color="primary"
      />
    </Box>
  </Box>
);
```

### –ö—Ä–æ–∫ 9: –î–æ–¥–∞—Ç–∫–æ–≤—ñ —ñ–º–ø–æ—Ä—Ç–∏
```jsx
import CircularProgress from '@mui/material/CircularProgress';
import VisibilityIcon from '@mui/icons-material/Visibility';
import MoreVertIcon from '@mui/icons-material/MoreVert';
import CloseIcon from '@mui/icons-material/Close';
```

---

*[–ü—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è –≤ –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö —Ä–æ–∑–¥—ñ–ª–∞—Ö...]*

